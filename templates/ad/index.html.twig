{% extends 'base.html.twig' %}

{% block title %} Hello AdController!{% endblock %}

{% block body %}

<main class="container">
    <h1>Hello {{ controller_name }}</h1>
<div class="row">
{# faire une boucle pour récupérer les données de la BDD. Boucle de la variable i, on va chercher entre 0 et 20 #}
{# exemple ancienne boucle de 0 à 20 annonces{% for i in 0..20 %} #}
{# nouvelle boucle avec ads paramétré (rappel ad et comme i il n'a pas de valeur paramétrée mais ici ad correspond au nom de la table (la class))dans la page controlleur AdController.php#}
{% for ad in ads %}
{# pour eviter les répétitions de route on crée une variable url avec set#}
{% set url=path('ads_single',{'slug':ad.slug}) %}

<div class="col-md-4">
<div class="card mt-2 mb-2">
<div class="card-header bg-primary text-light">
{# avec twig on récupère les données#}
Logement {{ad.rooms}} chambre(s) <span>{{ad.price}}€/nuit</span>
</div>
<div class="card-body">
{# la route 'ads_list' est déjà paramétrée dans Ad controller en annotations pour : Permet d'afficher une annonce; et dans les accolades on récupère un tableau de slug récupéré#}
{# ok parfait mais répition ici et environ ligne 31 on va donc créer une variable url ligne 15#}
    {# <a href="{{path('ads_single',{'slug':ad.slug})}}"> #}
    <a href="{{ url }}">
        <h4>{{ad.title}}</h4>
        <img src="{{ad.CoverImage}}" alt="{{ad.title}}" class="img-fluid">
    </a>
    <p>{{ad.introduction}}.</p>
    {# répetition 2 de la route#}
    {# <a href="{{path('ads_single',{'slug':ad.slug})}}" class="btn btn-info">+ d'infos</a> #}
    <a href="{{ url }}" class="btn btn-info">+ d'infos</a>
</div>
<div class="card-footer  text-muted"><span>Pas encore noté</span></div>
</div>
</div>
{% endfor %}
</div>
  </main> 

{% endblock %}
